<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Application Server &mdash; Match Application</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.6/slate/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Match Application" href="index.html" />
    <link rel="next" title="Gestión de tareas/Tickets" href="tickets.html" />
    <link rel="prev" title="Share Server" href="shareServer.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Match Application</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Contenido <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="shareServer.html"><strong>Share Server</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="shareServer.html#documentacion-tecnica-frontend"><em>Documentación técnica Frontend</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="shareServer.html#tecnologias-principales">Tecnologías principales</a></li>
<li class="toctree-l3"><a class="reference internal" href="shareServer.html#descripcion-de-solucion-implementada">Descripción de solución implementada</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shareServer.html#manual-de-usuario"><em>Manual de usuario</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="shareServer.html#web-de-administracion">Web de administración</a><ul>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#home">Home</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#creacion-de-usuario">Creación de usuario</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#edicion-de-foto-de-usuario">Edición de foto de usuario</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#edicion-de-usuario">Edición de usuario</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#visualizacion-de-usuario">Visualización de usuario</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#creacion-de-intereses">Creación de intereses</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#listar-intereses">Listar intereses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="shareServer.html#servidor">Servidor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shareServer.html#documentacion-tecnica-backend"><em>Documentación técnica Backend</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="shareServer.html#id1">Tecnologías principales</a></li>
<li class="toctree-l3"><a class="reference internal" href="shareServer.html#descripcion-de-la-solucion-implementada">Descripción de la solución implementada</a><ul>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#estructura-general">Estructura general</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#express-js">Express JS</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#service-layer">Service Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#models">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="shareServer.html#workflow">Workflow</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><strong>Application Server</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tecnologias-principales"><em>Tecnologías principales</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#descripcion-de-solucion-implementada"><em>Descripción de solución implementada</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#estructura-general">Estructura general</a></li>
<li class="toctree-l3"><a class="reference internal" href="#webserver">Webserver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dispatcher">Dispatcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="#secuencia-de-respuesta-a-una-peticion-web">Secuencia de respuesta a una petición web</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#service">Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dao">DAO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connector">Connector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#manual-de-usuario"><em>Manual de usuario</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nativo-solo-ubuntu-14-04-y-15-10">Nativo (Solo Ubuntu 14.04 y 15.10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#docker-plataformas-compatibles-con-docker">Docker (Plataformas compatibles con Docker)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#manual-tecnico"><em>Manual tecnico</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tests">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-coverage">Code Coverage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentacion-automatica">Documentación automática</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tickets.html"><strong>Gestión de tareas/Tickets</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="tickets.html#application-server"><em>APPLICATION SERVER</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="tickets.html#detalle-de-tickets-github">Detalle de Tickets Github</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tickets.html#shared-server"><em>SHARED SERVER</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="tickets.html#id1">Detalle de Tickets Github</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="linksInteres.html"><strong>Links de Interés</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="linksInteres.html#repositorios"><em>Repositorios</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="linksInteres.html#tickets-github"><em>Tickets GitHub</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="linksInteres.html#herramientas"><em>Herramientas</em></a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="application-server">
<h1><strong>Application Server</strong><a class="headerlink" href="#application-server" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="tecnologias-principales">
<h2><em>Tecnologías principales</em><a class="headerlink" href="#tecnologias-principales" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li>C++: Lenguaje base.</li>
<li>Mongoose (Cesanta): Servidor web embebido para gestión de las conexiones web.</li>
<li>RocksDB: Base de datos tipo Clave-Valor utilizada en el almacenamiento interno.</li>
<li>JSONCpp: Conversión de datos JSON.</li>
<li>CURL: Conexión con el Shared Server.</li>
</ul>
</div>
<div class="section" id="descripcion-de-solucion-implementada">
<h2><em>Descripción de solución implementada</em><a class="headerlink" href="#descripcion-de-solucion-implementada" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="estructura-general">
<h3>Estructura general<a class="headerlink" href="#estructura-general" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La arquitectura básica de la aplicación es una estructura por capas de la siguiente manera:</p>
<div class="figure align-center">
<img alt="_images/layers.png" src="_images/layers.png" />
</div>
<p>WEBSERVER y DISPATCHER se pueden ver como dos subcapas  de una misma capa diseñada para resolver el problema de recibir las peticiones y delegar correctamente su procesamiento.
En la capa WEBSERVER se manejan las conexiones web entrantes y adapta los datos que las componen para ser interpretados en la capa DISPATCHER. DISPATCHER determina el handler correcto para la petición y delega su procesamiento. Estos handlers se encuentran ubicados en la capa API, la cual se encarga de enviar el procesamiento a los objetos con la lógica de negocio ubicados en la capa SERVICE, que como su nombre lo indica, tiene los servicios que proveen el core de la funcionalidad. En una instancia inferior están DAO y CONNECTOR, quienes proveen un acceso homogéneo a datos y conexión a los sistemas adyacentes (la base de datos y el Shared Server) respectivamente.</p>
</div>
<div class="section" id="webserver">
<h3>Webserver<a class="headerlink" href="#webserver" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En esta capa se encuentran una serie de clases que hacen el manejo de las conexiones entrantes.</p>
<div class="figure align-center">
<img alt="_images/webserver.png" src="_images/webserver.png" />
</div>
<p>Donde WebServer tiene la responsabilidad de recibir las peticiones  y delegarlas al RequestDispatcher, encargado de procesarlo y generar la respuesta adecuada. Por otro lado RestRequest brinda el acceso a los datos de la petición, y RestResponse se encarga de recibir los datos que se transformarán luego en la respuesta a la petición web.</p>
</div>
<div class="section" id="dispatcher">
<h3>Dispatcher<a class="headerlink" href="#dispatcher" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Una vez recibida la petición es necesario determinar si hay un handler o no para atender la petición, esto es manejado por esta capa:</p>
<div class="figure align-center">
<img alt="_images/dispatching.png" src="_images/dispatching.png" />
</div>
<p>En este caso ApiDispatcher es encargado de delegar a una cadena de EndPoints distinta según el método HTTP de la petición (PUT, POST, GET y DELETE). Los EndPoints forman una Chain of Responsability donde si no se puede manejar la petición, es lanzada una excepción capturada por el dispatcher y da como resultado un 403 Forbidden. WebContext es como un contenedor de más alto nivel para la petición y su respuesta, este crecerá para brindar un contexto más rico al contexto del handler de la petición. Por otro lado se encuentra la interfaz RestResource que será implementada por todas aquellas clases que proveen handlers para una serie de peticiones relacionadas, como pueden ser los métodos relacionados la entidad Usuario.</p>
</div>
<div class="section" id="secuencia-de-respuesta-a-una-peticion-web">
<h3>Secuencia de respuesta a una petición web<a class="headerlink" href="#secuencia-de-respuesta-a-una-peticion-web" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="figure align-center">
<img alt="_images/secuenciarespuesta.png" src="_images/secuenciarespuesta.png" />
</div>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Dentro de esta capa se encontrarán las diferentes implementaciones de RestResource quienes serán los handlers concretos a los pedidos. Actualmente no hay ningún endpoint habilitado para ser consultado.</p>
</div>
<div class="section" id="service">
<h3>Service<a class="headerlink" href="#service" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En esta capa se proveen los servicios básicos del modelo de negocios, proveyendo las funcionalidades necesarias para resolver los requests recibidos, más no poseen ningún conocimiento sobre cómo son almacenados estos datos. Para ello, hacen uso de alguno de los DAO ofrecidos. Los servicios provistos son: autenticación, administración de perfiles de usuario,  conversaciones y búsqueda de candidatos(no implementado aun).</p>
</div>
<div class="section" id="dao">
<h3>DAO<a class="headerlink" href="#dao" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se trata de una capa intermedia entre la de connectors y la de servicios. Aquí se mapean los datos recibidos de las distintas fuentes con las clases del modelo de negocio utilizadas por la capa superior. Dentro se encuentra ChatDAO que provee funcionalidad para obtener los mensajes del chat que usando un DBConnector permite obtener y guardar mensajes que un usuario origen envía a otro usuario destino.
Otro de los componentes de esta capa es  MatchDAO que brinda la posibilidad de almacenar y recuperar matches que se dan entre dos usuarios.</p>
</div>
<div class="section" id="connector">
<h3>Connector<a class="headerlink" href="#connector" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta última capa es la encargada de las comunicaciones entre los distintos componentes que forman la aplicación, en este caso la base de datos (RocksDB) y el Shared Server. En ambos connectors se ofrecen todos los metodos necesario para intercambiar información con su par del otro lado. Sin embargo, no poseen ningún tipo de conocimiento sobre la forma de los datos que están enviando o recibiendo. Su única función es proveer una interfaz de comunicación.</p>
</div>
</div>
<div class="section" id="manual-de-usuario">
<h2><em>Manual de usuario</em><a class="headerlink" href="#manual-de-usuario" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para poder utilizar este servidor, existen dos posibilidades Nativo, o por Docker, cada una se explica a continuación.</p>
<div class="section" id="nativo-solo-ubuntu-14-04-y-15-10">
<h3>Nativo (Solo Ubuntu 14.04 y 15.10)<a class="headerlink" href="#nativo-solo-ubuntu-14-04-y-15-10" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Es necesario tener instalado git y hacer una copia del repositorio donde se encuentra el proyecto:</p>
<p><code class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git&#64;github.com:Tinder2Team/Tinder-Server.git</span></code></p>
<p>Luego es necesario correr el script que descarga todas las dependencias necesarias y deja la aplicación lista para correr:</p>
<div class="line-block">
<div class="line">Ubuntu 14.04: <code class="docutils literal"><span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">config.h</span> <span class="pre">-oldboost</span></code></div>
</div>
<p>Ubuntu 15.10: <code class="docutils literal"><span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">config.h</span></code></p>
<p>Y luego se la aplicación se puede correr con:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">./build/server/server</span></code></p>
</div>
<div class="section" id="docker-plataformas-compatibles-con-docker">
<h3>Docker (Plataformas compatibles con Docker)<a class="headerlink" href="#docker-plataformas-compatibles-con-docker" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para este método sólo es necesario tener instalado Docker, de esta manera, sólo se debe ejecutar:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-p</span> <span class="pre">0.0.0.0:8000:8000</span> <span class="pre">jtierno/tinder-server</span> <span class="pre">/bin/sh</span> <span class="pre">-c</span> <span class="pre">&quot;./server/server&quot;</span></code></p>
<p>y el servidor en ambos qué casos queda levantado en el puerto 8000 esperando por peticiones.</p>
</div>
</div>
<div class="section" id="manual-tecnico">
<h2><em>Manual tecnico</em><a class="headerlink" href="#manual-tecnico" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para las siguientes tareas, es necesario previamente haber configurado el proyecto (ver Manual de Usuario)</p>
<div class="section" id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para correr la suit de tests de la aplicación, parado en la raiz del proyecto, se debe ejecutar:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">./build/test/applib/testapp</span></code></p>
<p>Lo cual ejecuta los tests sobre la funcionalidad de la aplicación.</p>
</div>
<div class="section" id="code-coverage">
<h3>Code Coverage<a class="headerlink" href="#code-coverage" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Es posible generar un reporte de cobertura de tests mediante el uso del script apropiado ubicado dentro del directorio raíz del repositorio:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">./codeCoverage.sh</span></code></p>
<p>La sentencia anterior genera el archivo “build/coverage-report/index.html” el cual se puede abrir con cualquier navegador. En éste se puede ver el reporte generado.</p>
</div>
<div class="section" id="documentacion-automatica">
<h3>Documentación automática<a class="headerlink" href="#documentacion-automatica" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para generar el reporte del código automática, parado dentro de la carpeta build, se debe ejecutar el siguiente target del make</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">make</span> <span class="pre">doxyDoc</span></code></p>
<p>Esto genera el archivo “doxyDoc/html/index.html” que se puede abrir con cualquier navegador y permite visualizar la información referente al código de la aplicación.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright 2016, Grupo.<br/>
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>