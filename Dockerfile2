
####################################################
## Dockerfile para el uso del Application Server  ##
## Basado en Ubuntu 15.10              		  ##
####################################################

# Imagen Ubuntu oficial versi√≥n 14.04
FROM ubuntu:14.04

MAINTAINER jtierno jtierno

COPY ./ /home
RUN sudo apt-get install cmake -y
RUN cd /home && chmod 777 config.sh
RUN cd /home && sudo ./config.sh -oldboost -coverage -test -dependencies -g++-5
RUN cd /home sudo ./test/applib/testapp
RUN cd /home chmod 777 ./coverageReport.sh
RUN cd /home sudo ./coverageReport.sh
RUN cd /home cd build/coverage-data sudo lcov --directory . --capture --output-file coverage.info
RUN cd /home cd build/coverage-data sudo lcov --remove coverage.info '/usr/include/*' --output-file coverage.info
RUN cd /home cd build/coverage-data sudo lcov --remove coverage.info 'rocksdb/*' --output-file coverage.info
RUN cd /home cd build/coverage-data sudo lcov --remove coverage.info 'gmock/*' --output-file coverage.info
RUN cd /home cd build/coverage-data sudo lcov --remove coverage.info 'gtest/*' --output-file coverage.info
RUN cd /home cd build/coverage-data sudo lcov --remove coverage.info 'test/*' --output-file coverage.info
RUN cd /home cd build/coverage-data sudo lcov --remove coverage.info 'json/*' --output-file coverage.info
RUN cd /home cd build/coverage-data  sudo lcov --list coverage.info
WORKDIR /home/build
CMD ["bash"]